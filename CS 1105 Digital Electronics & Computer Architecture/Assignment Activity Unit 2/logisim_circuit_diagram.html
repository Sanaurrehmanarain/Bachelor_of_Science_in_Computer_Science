<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home Security System - Circuit Diagram</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #333;
            padding-bottom: 20px;
        }
        
        .circuit-canvas {
            width: 100%;
            height: 600px;
            border: 2px solid #333;
            background: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .component {
            position: absolute;
            border: 2px solid #000;
            background: #fff;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .component:hover {
            background: #e0e0e0;
            transform: scale(1.05);
        }
        
        .component.active {
            background: #90EE90;
            border-color: #008000;
        }
        
        .mux {
            width: 60px;
            height: 80px;
            clip-path: polygon(0 0, 80% 0, 100% 50%, 80% 100%, 0 100%);
            background: #FFE4B5;
            border-radius: 0;
        }
        
        .decoder {
            width: 80px;
            height: 100px;
            background: #E6E6FA;
        }
        
        .encoder {
            width: 80px;
            height: 100px;
            background: #F0E68C;
        }
        
        .logic-gate {
            width: 50px;
            height: 40px;
            background: #FFF8DC;
        }
        
        .demux {
            width: 60px;
            height: 80px;
            clip-path: polygon(20% 0, 100% 0, 100% 100%, 20% 100%, 0 50%);
            background: #FFB6C1;
        }
        
        .input-pin {
            width: 20px;
            height: 20px;
            background: #FF6B6B;
            border-radius: 50%;
            border: 2px solid #000;
        }
        
        .output-pin {
            width: 20px;
            height: 20px;
            background: #4ECDC4;
            border-radius: 50%;
            border: 2px solid #000;
        }
        
        .wire {
            position: absolute;
            background: #000;
            z-index: 1;
        }
        
        .wire.horizontal {
            height: 2px;
        }
        
        .wire.vertical {
            width: 2px;
        }
        
        .wire.active {
            background: #008000;
            animation: signal-flow 1.5s infinite;
        }
        
        @keyframes signal-flow {
            0% { box-shadow: 0 0 0 rgba(0, 128, 0, 0.8); }
            50% { box-shadow: 0 0 10px rgba(0, 128, 0, 0.8); }
            100% { box-shadow: 0 0 0 rgba(0, 128, 0, 0.8); }
        }
        
        .label {
            position: absolute;
            font-size: 11px;
            font-weight: bold;
            color: #333;
            background: white;
            padding: 2px 4px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        
        .truth-table-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .table {
            border-collapse: collapse;
            width: 100%;
            font-size: 12px;
        }
        
        .table th,
        .table td {
            border: 1px solid #333;
            padding: 8px;
            text-align: center;
        }
        
        .table th {
            background: #333;
            color: white;
            font-weight: bold;
        }
        
        .table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .table tr.highlight {
            background: #90EE90;
        }
        
        .component-details {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
        }
        
        .tab {
            padding: 10px 20px;
            background: #f0f0f0;
            border: 1px solid #333;
            border-bottom: none;
            cursor: pointer;
            font-weight: bold;
        }
        
        .tab.active {
            background: white;
            border-bottom: 2px solid white;
            margin-bottom: -2px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Smart Home Security System - Logisim Circuit Implementation</h1>
            <p>Interactive circuit diagram showing component connections and signal flow</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="circuit">Circuit Diagram</div>
            <div class="tab" data-tab="truth-tables">Truth Tables</div>
            <div class="tab" data-tab="components">Component Details</div>
        </div>
        
        <div class="tab-content active" id="circuit">
            <div class="circuit-canvas" id="canvas">
                <!-- Input Section -->
                <div class="input-pin" id="keypad-input" style="top: 50px; left: 20px;"></div>
                <div class="label" style="top: 75px; left: 10px;">Keypad<br>4-bit</div>
                
                <div class="input-pin" id="card-input" style="top: 120px; left: 20px;"></div>
                <div class="label" style="top: 145px; left: 10px;">Card<br>16-bit</div>
                
                <!-- Encoder for Card Input -->
                <div class="component encoder" id="encoder" style="top: 100px; left: 80px;">
                    <div style="padding: 35px 5px;">16:4<br>ENCODER</div>
                </div>
                
                <!-- Input Multiplexer -->
                <div class="component mux" id="input-mux" style="top: 70px; left: 200px;">
                    <div style="padding: 25px 5px;">2:1<br>MUX</div>
                </div>
                
                <!-- Method Select -->
                <div class="input-pin" id="method-select" style="top: 180px; left: 220px;"></div>
                <div class="label" style="top: 205px; left: 205px;">Method<br>Select</div>
                
                <!-- 4:16 Decoder -->
                <div class="component decoder" id="decoder" style="top: 50px; left: 320px;">
                    <div style="padding: 35px 10px;">4:16<br>DECODER</div>
                </div>
                
                <!-- Code Comparators -->
                <div class="component logic-gate" id="comp1" style="top: 30px; left: 450px;">
                    <div style="padding: 10px 2px;">COMP<br>1234</div>
                </div>
                
                <div class="component logic-gate" id="comp2" style="top: 80px; left: 450px;">
                    <div style="padding: 10px 2px;">COMP<br>5678</div>
                </div>
                
                <div class="component logic-gate" id="comp3" style="top: 130px; left: 450px;">
                    <div style="padding: 10px 2px;">COMP<br>9999</div>
                </div>
                
                <!-- Permission Logic -->
                <div class="component logic-gate" id="and-gate1" style="top: 50px; left: 550px;">
                    <div style="padding: 10px 8px;">AND</div>
                </div>
                
                <div class="component logic-gate" id="and-gate2" style="top: 100px; left: 550px;">
                    <div style="padding: 10px 8px;">AND</div>
                </div>
                
                <div class="component logic-gate" id="or-gate" style="top: 75px; left: 650px;">
                    <div style="padding: 10px 12px;">OR</div>
                </div>
                
                <!-- Room Selection -->
                <div class="input-pin" id="room-select" style="top: 250px; left: 20px;"></div>
                <div class="label" style="top: 275px; left: 5px;">Room<br>Select<br>2-bit</div>
                
                <!-- Final AND Gate -->
                <div class="component logic-gate" id="final-and" style="top: 150px; left: 750px;">
                    <div style="padding: 10px 8px;">AND</div>
                </div>
                
                <!-- 1:4 Demultiplexer -->
                <div class="component demux" id="demux" style="top: 130px; left: 850px;">
                    <div style="padding: 25px 5px;">1:4<br>DEMUX</div>
                </div>
                
                <!-- Room Outputs -->
                <div class="output-pin" id="room0-out" style="top: 100px; left: 950px;"></div>
                <div class="label" style="top: 125px; left: 935px;">Room 0<br>Main</div>
                
                <div class="output-pin" id="room1-out" style="top: 130px; left: 950px;"></div>
                <div class="label" style="top: 155px; left: 935px;">Room 1<br>Bedroom</div>
                
                <div class="output-pin" id="room2-out" style="top: 160px; left: 950px;"></div>
                <div class="label" style="top: 185px; left: 935px;">Room 2<br>Office</div>
                
                <div class="output-pin" id="room3-out" style="top: 190px; left: 950px;"></div>
                <div class="label" style="top: 215px; left: 935px;">Room 3<br>Safe</div>
                
                <!-- Wires (simplified representation) -->
                <!-- Horizontal wires -->
                <div class="wire horizontal" id="wire1" style="top: 59px; left: 45px; width: 30px;"></div>
                <div class="wire horizontal" id="wire2" style="top: 129px; left: 45px; width: 30px;"></div>
                <div class="wire horizontal" id="wire3" style="top: 110px; left: 165px; width: 30px;"></div>
                <div class="wire horizontal" id="wire4" style="top: 100px; left: 265px; width: 50px;"></div>
                <div class="wire horizontal" id="wire5" style="top: 70px; left: 405px; width: 40px;"></div>
                <div class="wire horizontal" id="wire6" style="top: 70px; left: 605px; width: 40px;"></div>
                <div class="wire horizontal" id="wire7" style="top: 170px; left: 805px; width: 40px;"></div>
                <div class="wire horizontal" id="wire8" style="top: 145px; left: 915px; width: 30px;"></div>
                
                <!-- Control buttons -->
                <div style="position: absolute; bottom: 20px; left: 20px;">
                    <button id="simulate-btn" style="padding: 10px 20px; font-weight: bold;">Simulate Signal Flow</button>
                    <button id="reset-btn" style="padding: 10px 20px; font-weight: bold; margin-left: 10px;">Reset</button>
                </div>
                
                <div style="position: absolute; bottom: 20px; right: 20px; font-size: 11px;">
                    Click components for details • Green = Active Signal
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="truth-tables">
            <div class="truth-table-container">
                <div>
                    <h3>4:16 Decoder Truth Table (Sample)</h3>
                    <table class="table" id="decoder-table">
                        <thead>
                            <tr>
                                <th>A3</th>
                                <th>A2</th>
                                <th>A1</th>
                                <th>A0</th>
                                <th>Output Line</th>
                                <th>Code Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td>0</td>
                                <td>0</td>
                                <td>0</td>
                                <td>Y0</td>
                                <td>0000</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td>0</td>
                                <td>0</td>
                                <td>1</td>
                                <td>Y1</td>
                                <td>0001</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td>0</td>
                                <td>1</td>
                                <td>0</td>
                                <td>Y2</td>
                                <td>0010</td>
                            </tr>
                            <tr class="highlight">
                                <td>1</td>
                                <td>1</td>
                                <td>0</td>
                                <td>0</td>
                                <td>Y12</td>
                                <td>1100 (C)</td>
                            </tr>
                            <tr>
                                <td>...</td>
                                <td>...</td>
                                <td>...</td>
                                <td>...</td>
                                <td>...</td>
                                <td>...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div>
                    <h3>Room Access Permission Matrix</h3>
                    <table class="table" id="permission-table">
                        <thead>
                            <tr>
                                <th>Room</th>
                                <th>Master (1234)</th>
                                <th>Guest (5678)</th>
                                <th>Office (9999)</th>
                                <th>Admin Card</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Main Door</td>
                                <td>✓</td>
                                <td>✓</td>
                                <td>✗</td>
                                <td>✓</td>
                            </tr>
                            <tr>
                                <td>Bedroom</td>
                                <td>✓</td>
                                <td>✗</td>
                                <td>✗</td>
                                <td>✓</td>
                            </tr>
                            <tr class="highlight">
                                <td>Office</td>
                                <td>✓</td>
                                <td>✗</td>
                                <td>✓</td>
                                <td>✓</td>
                            </tr>
                            <tr>
                                <td>Safe Room</td>
                                <td>✓</td>
                                <td>✗</td>
                                <td>✗</td>
                                <td>✓</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="components">
            <div class="component-details">
                <h3>Component Specifications</h3>
                
                <h4>1. Priority Encoder (16:4)</h4>
                <p><strong>Function:</strong> Converts 16-line one-hot keycard input to 4-bit binary code</p>
                <p><strong>Implementation:</strong> Uses cascaded OR gates and priority logic</p>
                <p><strong>Logisim Component:</strong> Built-in Priority Encoder or custom logic gates</p>
                
                <h4>2. Input Multiplexer (2:1, 4-bit)</h4>
                <p><strong>Function:</strong> Selects between keypad input and encoded card input</p>
                <p><strong>Control:</strong> Method select signal (0 = keypad, 1 = card)</p>
                <p><strong>Logisim Component:</strong> 4-bit 2:1 Multiplexer</p>
                
                <h4>3. Address Decoder (4:16)</h4>
                <p><strong>Function:</strong> Decodes 4-bit input to 16-line one-hot output</p>
                <p><strong>Enable:</strong> Active high enable input</p>
                <p><strong>Logisim Component:</strong> Built-in Decoder with enable</p>
                
                <h4>4. Code Comparators</h4>
                <p><strong>Function:</strong> Compare decoded lines against authorized codes</p>
                <p><strong>Implementation:</strong> AND gates connected to specific decoder outputs</p>
                <p><strong>Codes:</strong> 1234 (bin: 1100), 5678 (custom encoding), 9999 (custom)</p>
                
                <h4>5. Permission Logic Network</h4>
                <p><strong>Function:</strong> Implements room-specific access rules</p>
                <p><strong>Implementation:</strong> AND gates for room+code combinations, OR gates for multiple valid codes</p>
                <p><strong>Scalability:</strong> Easy to add new codes/rooms by expanding logic matrix</p>
                
                <h4>6. Output Demultiplexer (1:4)</h4>
                <p><strong>Function:</strong> Routes unlock signal to selected room</p>
                <p><strong>Select:</strong> 2-bit room address (00=Main, 01=Bedroom, 10=Office, 11=Safe)</p>
                <p><strong>Logisim Component:</strong> Built-in Demultiplexer</p>
                
                <h4>Timing Considerations</h4>
                <ul>
                    <li>Propagation delay through decoder: ~20ns typical</li>
                    <li>Comparator logic delay: ~10ns per gate level</li>
                    <li>Total system delay: ~50ns worst case</li>
                    <li>Add input debouncing for mechanical switches (100ms typical)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabName).classList.add('active');
            });
        });
        
        // Component interaction
        document.querySelectorAll('.component').forEach(component => {
            component.addEventListener('click', () => {
                showComponentDetails(component.id);
            });
        });
        
        function showComponentDetails(componentId) {
            const details = {
                'encoder': 'Priority Encoder: Converts 16-line keycard input to 4-bit binary. Only one input line should be active at a time.',
                'input-mux': 'Input Multiplexer: Selects between keypad (4-bit) and encoded card (4-bit) based on method select signal.',
                'decoder': '4:16 Decoder: Converts 4-bit input into one of 16 output lines. Only one output is active for each input combination.',
                'comp1': 'Code Comparator 1: Detects when input matches master code 1234 (binary pattern).',
                'comp2': 'Code Comparator 2: Detects when input matches guest code 5678.',
                'comp3': 'Code Comparator 3: Detects when input matches office code 9999.',
                'and-gate1': 'Permission AND Gate: Combines code match with room permission for master access.',
                'and-gate2': 'Permission AND Gate: Combines code match with room permission for guest access.',
                'or-gate': 'Access OR Gate: Grants access if any valid code/permission combination is active.',
                'final-and': 'Final AND Gate: Combines access permission with system enable signal.',
                'demux': '1:4 Demultiplexer: Routes unlock signal to one of four rooms based on room select input.'
            };
            
            alert(details[componentId] || 'Component information not available');
        }
        
        // Signal simulation
        let simulationActive = false;
        
        document.getElementById('simulate-btn').addEventListener('click', () => {
            if (!simulationActive) {
                startSimulation();
            } else {
                stopSimulation();
            }
        });
        
        document.getElementById('reset-btn').addEventListener('click', () => {
            resetSimulation();
        });
        
        function startSimulation() {
            simulationActive = true;
            document.getElementById('simulate-btn').textContent = 'Stop Simulation';
            
            // Simulate signal flow for master code accessing office
            const sequence = [
                ['keypad-input'],
                ['encoder', 'input-mux'],
                ['decoder'],
                ['comp1'],
                ['and-gate1'],
                ['or-gate'],
                ['final-and'],
                ['demux'],
                ['room2-out']
            ];
            
            let step = 0;
            const interval = setInterval(() => {
                if (step < sequence.length && simulationActive) {
                    // Activate current step components
                    sequence[step].forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            element.classList.add('active');
                        }
                    });
                    
                    // Activate corresponding wires
                    activateWires(step);
                    step++;
                } else {
                    clearInterval(interval);
                    if (simulationActive) {
                        setTimeout(() => {
                            if (simulationActive) resetAndRestart();
                        }, 2000);
                    }
                }
            }, 800);
        }
        
        function stopSimulation() {
            simulationActive = false;
            document.getElementById('simulate-btn').textContent = 'Simulate Signal Flow';
        }
        
        function resetSimulation() {
            simulationActive = false;
            document.getElementById('simulate-btn').textContent = 'Simulate Signal Flow';
            
            // Remove all active classes
            document.querySelectorAll('.component, .input-pin, .output-pin, .wire').forEach(element => {
                element.classList.remove('active');
            });
        }
        
        function resetAndRestart() {
            resetSimulation();
            setTimeout(startSimulation, 500);
        }
        
        function activateWires(step) {
            const wireMap = {
                0: ['wire1'],
                1: ['wire2', 'wire3'],
                2: ['wire4'],
                3: ['wire5'],
                4: [],
                5: ['wire6'],
                6: [],
                7: ['wire7'],
                8: ['wire8']
            };
            
            if (wireMap[step]) {
                wireMap[step].forEach(wireId => {
                    const wire = document.getElementById(wireId);
                    if (wire) {
                        wire.classList.add('active');
                    }
                });
            }
        }
    </script>
</body>
</html>